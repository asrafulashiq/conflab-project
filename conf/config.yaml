# @package _global_

defaults:
  - mode: vis
  - override hydra/hydra_logging: none
  - override hydra/job_logging: none

dataset: "conflab-dataset"

img_root_dir: "${env:HOME}/datasets/conflab-mm/frames/videoSegments"
ann_dir: "${env:HOME}/datasets/conflab-mm/pose"

create_coco: false
coco_json_path: "store/conflab_coco.json"
coco_json_path_train: "store/conflab_coco_train.json"
coco_json_path_test: "store/conflab_coco_test.json"
train_split: 0.8
test_cam:
  - cam6

model_zoo: "COCO-Keypoints/keypoint_rcnn_R_50_FPN_3x.yaml"
model_zoo_weights: "https://dl.fbaipublicfiles.com/detectron2/COCO-Keypoints/keypoint_rcnn_R_50_FPN_3x/137849621/model_final_a6e10b.pkl"

name: "kp_base"
output_dir: "./ckpt/${name}"
checkpoint: null # whether to load any pretrained checkpoint

train_dataset: ${dataset}_train
test_dataset: ${dataset}_test

log_dir: "logs"
log_prefix: ""

num_workers: 4
num_classes: 1

total_ann: null

# eval_only: true
# pretrained: false
# resume: false
# visualize: false
# num_items: 10

num_gpus: 1
num_machines: 1
batch_size: 2
max_iters: 5000
learning_rate: 0.0005

roi_thresh: 0.5

size: [960, 540]

# data creation
thresh_null_kp: 0.1 # upper limit for null values: if less than 10% are null values, pick the image
data_create_num_vis: 10
data_plot: false
total_ann_per_file: null

hydra:
  run:
    dir: .
  output_subdir: null
